# yaml-language-server: $schema=https://raw.githubusercontent.com/JanDeDobbeleer/oh-my-posh/main/themes/schema.json
final_space: true
version: 3
shell_integration: true
console_title_template: "{{.UserName}}@{{.HostName}} in {{.PWD}}"

secondary_prompt:
  template: "\uf101 "
  foreground: magenta
  background: transparent

transient_prompt:
  template: "\uf105 "
  background: transparent
  foreground_templates:
    - "{{if gt .Code 0}}red{{end}}"
    - "{{if eq .Code 0}}magenta{{end}}"

blocks:
  - type: prompt
    alignment: left
    newline: false
    segments:
      - type: path
        style: plain
        template: "{{.Path}}"
        background: transparent
        foreground: blue

      - type: git
        style: plain
        template:
          " {{.HEAD}} {{if or (.Working.Changed) (.Staging.Changed) (.Ahead) (.Behind) (gt .StashCount 0)}}[\
          {{if gt .PushAhead 0}}\uf106{{end}}\
          {{if gt .PushBehind 0}}\uf107{{end}}\
          {{if gt .StashCount 0}}#{{end}}\
          {{if .Staging.Changed}}\uf42e{{end}}\
          {{if gt .Working.Unmerged 0}}\u21AF{{end}}\
          {{if gt .Working.Deleted 0}}x{{end}}\
          {{if gt .Working.Added 0}}+{{end}}\
          {{if gt .Working.Modified 0}}!{{end}}\
          {{if gt .Working.Untracked 0}}?{{end}}\
          ]{{end}}"
        background: transparent
        options:
          fetch_status: true
          fetch_push_status: true
          fetch_upstream_icon: true
          branch_icon: "\ue725 "

  - type: prompt
    alignment: left
    newline: true
    segments:
      - type: text
        style: plain
        template: "{{.UserName}} "
        background: transparent
        foreground: cyan
      - type: text
        style: plain
        template: "\uf105"
        background: transparent
        foreground_templates:
          - "{{if gt .Code 0}}red{{end}}"
          - "{{if eq .Code 0}}magenta{{end}}"
  - type: rprompt
    alignment: right
    newline: false
    segments:
      - type: executiontime
        style: plain
        template: "{{.FormattedMs}}"
        background: transparent
        foreground: yellow
        options:
          style: austin
